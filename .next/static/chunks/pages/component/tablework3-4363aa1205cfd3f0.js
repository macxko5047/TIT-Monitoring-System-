(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[934],{1733:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var o=r(n(4938)),i=n(5893),a=(0,o.default)((0,i.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");t.Z=a},9869:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var o=r(n(4938)),i=n(5893),a=(0,o.default)((0,i.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"ModeEdit");t.Z=a},4938:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.createSvgIcon}});var r=n(8075)},1953:function(e,t,n){"use strict";n.d(t,{Z:function(){return Z}});var r=n(7462),o=n(3366),i=n(7294),a=n(6010),l=n(9731),s=n(6523),c=n(9707),u=n(6682),d=n(5893);let p=["className","component"];var f=n(7078),m=n(9762);let h=(0,m.Z)(),b=function(e={}){let{defaultTheme:t,defaultClassName:n="MuiBox-root",generateClassName:f,styleFunctionSx:m=s.Z}=e,h=(0,l.ZP)("div",{shouldForwardProp:e=>"theme"!==e&&"sx"!==e&&"as"!==e})(m),b=i.forwardRef(function(e,i){let l=(0,u.Z)(t),s=(0,c.Z)(e),{className:m,component:b="div"}=s,Z=(0,o.Z)(s,p);return(0,d.jsx)(h,(0,r.Z)({as:b,ref:i,className:(0,a.Z)(m,f?f(n):n),theme:l},Z))});return b}({defaultTheme:h,defaultClassName:"MuiBox-root",generateClassName:f.Z.generate});var Z=b},9144:function(e,t,n){"use strict";var r=n(3366),o=n(7462),i=n(7294),a=n(5408),l=n(8700),s=n(9707),c=n(9766),u=n(1719),d=n(8884),p=n(5893);let f=["component","direction","spacing","divider","children"],m=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],h=({ownerState:e,theme:t})=>{let n=(0,o.Z)({display:"flex",flexDirection:"column"},(0,a.k9)({theme:t},(0,a.P$)({values:e.direction,breakpoints:t.breakpoints.values}),e=>({flexDirection:e})));if(e.spacing){let r=(0,l.hB)(t),i=Object.keys(t.breakpoints.values).reduce((t,n)=>(("object"==typeof e.spacing&&null!=e.spacing[n]||"object"==typeof e.direction&&null!=e.direction[n])&&(t[n]=!0),t),{}),s=(0,a.P$)({values:e.direction,base:i}),u=(0,a.P$)({values:e.spacing,base:i});"object"==typeof s&&Object.keys(s).forEach((e,t,n)=>{let r=s[e];if(!r){let o=t>0?s[n[t-1]]:"column";s[e]=o}});let d=(t,n)=>({"& > :not(style) + :not(style)":{margin:0,[`margin${m(n?s[n]:e.direction)}`]:(0,l.NA)(r,t)}});n=(0,c.Z)(n,(0,a.k9)({theme:t},u,d))}return(0,a.dt)(t.breakpoints,n)},b=(0,u.ZP)("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>[t.root]})(h),Z=i.forwardRef(function(e,t){let n=(0,d.Z)({props:e,name:"MuiStack"}),a=(0,s.Z)(n),{component:l="div",direction:c="column",spacing:u=0,divider:m,children:h}=a,Z=(0,r.Z)(a,f);return(0,p.jsx)(b,(0,o.Z)({as:l,ownerState:{direction:c,spacing:u},ref:t},Z,{children:m?function(e,t){let n=i.Children.toArray(e).filter(Boolean);return n.reduce((e,r,o)=>(e.push(r),o<n.length-1&&e.push(i.cloneElement(t,{key:`separator-${o}`})),e),[])}(h,m):h}))});t.Z=Z},8075:function(e,t,n){"use strict";n.r(t),n.d(t,{capitalize:function(){return o.Z},createChainedFunction:function(){return i},createSvgIcon:function(){return a.Z},debounce:function(){return l.Z},deprecatedPropType:function(){return s},isMuiElement:function(){return c.Z},ownerDocument:function(){return u.Z},ownerWindow:function(){return d.Z},requirePropFactory:function(){return p},setRef:function(){return f},unstable_ClassNameGenerator:function(){return v},unstable_useEnhancedEffect:function(){return m.Z},unstable_useId:function(){return h.Z},unsupportedProp:function(){return b},useControlled:function(){return Z.Z},useEventCallback:function(){return x.Z},useForkRef:function(){return g.Z},useIsFocusVisible:function(){return y.Z}});var r=n(7078),o=n(6622),i=n(9064).Z,a=n(8175),l=n(5400),s=function(e,t){return()=>null},c=n(7335),u=n(7505),d=n(7577);n(7462);var p=function(e,t){return()=>null},f=n(7960).Z,m=n(3289),h=n(9669),b=function(e,t,n,r,o){return null},Z=n(2293),x=n(6432),g=n(4771),y=n(1625);let v={configure(e){console.warn("MUI: `ClassNameGenerator` import from `@mui/material/utils` is outdated and might cause unexpected issues.\n\nYou should use `import { unstable_ClassNameGenerator } from '@mui/material/className'` instead\n\nThe detail of the issue: https://github.com/mui/material-ui/issues/30011#issuecomment-1024993401\n\nThe updated documentation: https://mui.com/guides/classname-generator/"),r.Z.configure(e)}}},6433:function(e,t,n){"use strict";n.d(t,{T:function(){return y}});var r=n(7462),o=n(3366),i=n(7294),a=n(7169),l=n(562),s=n(1719),c=n(5400),u=n(3655),d=n(8836),p=n(4696),f=n(1207),m=n(4791),h=n(5893);let b=["quickFilterParser","quickFilterFormatter","debounceMs"],Z=(0,s.ZP)(a.Z,{name:"MuiDataGrid",slot:"ToolbarQuickFilter",overridesResolver:(e,t)=>t.toolbarQuickFilter})(({theme:e})=>({width:"auto",paddingBottom:e.spacing(.5),"& input":{marginLeft:e.spacing(.5)},"& .MuiInput-underline:before":{borderBottom:`1px solid ${e.palette.divider}`},[`& input[type=search]::-ms-clear,
& input[type=search]::-ms-reveal`]:{display:"none",width:0,height:0},[`& input[type="search"]::-webkit-search-decoration,
  & input[type="search"]::-webkit-search-cancel-button,
  & input[type="search"]::-webkit-search-results-button,
  & input[type="search"]::-webkit-search-results-decoration`]:{display:"none"}})),x=e=>e.split(" ").filter(e=>""!==e),g=e=>e.join(" ");function y(e){var t;let{quickFilterParser:n=x,quickFilterFormatter:a=g,debounceMs:s=500}=e,y=(0,o.Z)(e,b),v=(0,u.l)(),w=(0,d.B)(),k=(0,p.P)(v,f.Az),[_,N]=i.useState(()=>a(null!=k?k:[])),[j,S]=i.useState(k);i.useEffect(()=>{(0,m.xb)(j,k)||(S(k),N(e=>(0,m.xb)(n(e),k)?e:a(null!=k?k:[])))},[j,k,a,n]);let C=i.useCallback(e=>{v.current.setQuickFilterValues(n(e))},[v,n]),P=i.useMemo(()=>(0,c.Z)(C,s),[C,s]),G=i.useCallback(e=>{let t=e.target.value;N(t),P(t)},[P]),I=i.useCallback(()=>{N(""),C("")},[C]);return(0,h.jsx)(Z,(0,r.Z)({as:w.components.BaseTextField,variant:"standard",value:_,onChange:G,placeholder:v.current.getLocaleText("toolbarQuickFilterPlaceholder"),"aria-label":v.current.getLocaleText("toolbarQuickFilterLabel"),type:"search",InputProps:{startAdornment:(0,h.jsx)(w.components.QuickFilterIcon,{fontSize:"small"}),endAdornment:(0,h.jsx)(l.Z,{"aria-label":v.current.getLocaleText("toolbarQuickFilterDeleteIconLabel"),size:"small",sx:{visibility:_?"visible":"hidden"},onClick:I,children:(0,h.jsx)(w.components.QuickFilterClearIcon,{fontSize:"small"})})}},y,null==(t=w.componentsProps)?void 0:t.baseTextField))}},5965:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/component/tablework3",function(){return n(2587)}])},1019:function(e,t,n){"use strict";var r=n(9802);let o=(0,r.eI)("https://lldzljxhukgbylauxnvo.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxsZHpsanhodWtnYnlsYXV4bnZvIiwicm9sZSI6ImFub24iLCJpYXQiOjE2NzAyOTkwMDIsImV4cCI6MTk4NTg3NTAwMn0.Lp4hg1lEBD7KYFckhxaG6NPGo5LSWngUBa37UDhkrNQ");t.Z=o},2587:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v}});var r=n(5893),o=n(7294),i=n(1401),a=n(1953),l=n(6433),s=n(9712),c=n(1019),u=n(9630),d=n(2096),p=n(5084),f=n(9144),m=n(1719),h=n(562),b=n(1733),Z=n(9869),x=n(7169);let g={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:1e3,hight:450,bgcolor:"background.paper",border:"20px solid #87CEFA",boxShadow:24,pt:3,px:5,pb:3};function y(){return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(a.Z,{sx:{p:.5,pb:0},children:[(0,r.jsx)(u.Z,{sx:{fontSize:28},children:"NG Product"}),(0,r.jsx)(l.T,{quickFilterParser:e=>e.split(",").map(e=>e.trim()).filter(e=>""!==e)})]})})}function v(){let[e,t]=(0,o.useState)(!1),[n,l]=(0,o.useState)(!1),v=()=>l(!0),w=()=>l(!1),[k,_]=(0,o.useState)(""),[N,j]=(0,o.useState)(""),[S,C]=(0,o.useState)(!1),P=()=>C(!0),G=()=>C(!1),[I,D]=(0,o.useState)(""),[F,M]=(0,o.useState)(""),[E,z]=(0,o.useState)(""),[T,q]=(0,o.useState)(""),[L,B]=(0,o.useState)(""),Q=new Date;Q.getDate(),Q.getMonth(),Q.getFullYear(),Q.getFullYear(),Q.getMonth(),Q.getDate();let[A,O]=(0,o.useState)(""),[V,R]=(0,o.useState)(1),[Y,J]=(0,o.useState)(0),[X,$]=(0,o.useState)(0),[U,H]=(0,o.useState)(0),[W,K]=(0,o.useState)(!1),[ee,et]=(0,o.useState)([]),[en,er]=(0,o.useState)([]),[eo,ei]=(0,o.useState)("");A.split(":"),(0,o.useEffect)(()=>{let e=async()=>{let{data:e,error:t}=await c.Z.from("NG_record").select("*").order("NG_code").filter("PD_key","in","("+localStorage.getItem("PD_key")+")");et(e)};e()},[]);let ea=async()=>{let{data:e,error:t,count:n}=await c.Z.from("NG_record").select("NG_qty",{count:"exact"}).filter("PD_key","in","("+localStorage.getItem("PD_key")+")");if(!t){let r=e.reduce((e,t)=>e+t.NG_qty,0);await H(r),await el(Number(r))}},el=async e=>{let{data:t,error:n}=await c.Z.from("Production_history").update({NG_qty:e}).eq("PD_key",localStorage.getItem("PD_key"));t?console.log(t):console.log(n)};(0,o.useEffect)(()=>{let e=c.Z.channel("custom-all-NG_recordTable").on("postgres_changes",{event:"*",schema:"public",table:"NG_record"},e=>{console.log("Change received NG_record",e),es(),ea()}).subscribe();return()=>{c.Z.removeChannel(e)}},[ee]);let es=async()=>{let{data:e,error:t}=await c.Z.from("NG_record").select("*").order("NG_code").filter("PD_key","in","("+localStorage.getItem("PD_key")+")");et(e)};(0,m.ZP)(i.Z)(e=>{let{theme:t}=e;return{backgroundColor:"dark"===t.palette.mode?"#1A2027":"#fff",...t.typography.body2,padding:t.spacing(1),textAlign:"center",color:t.palette.text.secondary}});let ec=(e,t)=>{j(t.row.NG_code+" "+t.row.NG_qty+" Pcs "),_(t.row.id)},eu=(e,t)=>{z(t.row.NG_code),q(t.row.Part_name),B(t.row.NG_qty),M(t.row.NG_description),D(t.row.id)},ed=async e=>{if(e.preventDefault(),k){let{data:t,error:n}=await c.Z.from("NG_record").delete().eq("id",k);n||(console.log("NG Delete Success :",t),es(),w())}},ep=async e=>{if(e.preventDefault(),I){let{data:t,error:n}=await c.Z.from("NG_record").update({NG_qty:L}).eq("id",I);n||(console.log("NG Edit Success :",t),es(),G())}};return((0,o.useEffect)(()=>{K(!0)},[]),W)?(0,r.jsxs)("div",{children:[(0,r.jsx)(a.Z,{sx:{height:400,flexGrow:1},children:(0,r.jsx)(s._,{rows:ee,columns:[{field:"NG_code",headerName:"Code"},{field:"NG_description",headerName:"Description"},{field:"Part_name",headerName:"Part component",width:130},{field:"NG_qty",headerName:"Q'ty",type:"number",width:70},{field:"action",headerName:"Delete",width:70,sortable:!1,disableColumnMenu:!0,renderCell:e=>(0,r.jsx)(u.Z,{onClick(t){ec(t,e),v()},children:(0,r.jsx)(h.Z,{"aria-label":"delete",size:"large",children:(0,r.jsx)(b.Z,{})})})},{field:"actionEdit",headerName:"Edit",width:70,sortable:!1,disableColumnMenu:!0,renderCell:e=>(0,r.jsx)(u.Z,{onClick(t){eu(t,e),P()},children:(0,r.jsx)(h.Z,{"aria-label":"edit",size:"large",children:(0,r.jsx)(Z.Z,{})})})}],components:{Toolbar:y}})}),(0,r.jsx)(d.Z,{open:n,onClose:w,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,r.jsxs)(a.Z,{component:"form",onSubmit:ed,noValidate:!0,sx:g,children:[(0,r.jsx)(u.Z,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Confirm delete"}),(0,r.jsxs)(u.Z,{id:"modal-modal-description",sx:{mt:2},children:["Do you want to delete NG code : ",N," ?",(0,r.jsx)("div",{children:(0,r.jsx)("br",{})}),(0,r.jsxs)(f.Z,{direction:"row",justifyContent:"center",spacing:2,children:[(0,r.jsx)(p.Z,{type:"submit",variant:"contained",children:"Yes"}),(0,r.jsx)(p.Z,{onClick:w,variant:"outlined",color:"error",children:"No"})]})]})]})}),(0,r.jsx)(d.Z,{open:S,onClose:G,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,r.jsxs)(a.Z,{component:"form",onSubmit:ep,noValidate:!0,sx:{...g,width:1e3},children:[(0,r.jsx)(u.Z,{id:"modal-modal-title",variant:"h3",p:3,children:"Edit NG"}),(0,r.jsxs)(f.Z,{direction:"row",justifyContent:"center",spacing:4,children:[(0,r.jsxs)(u.Z,{sx:{fontSize:20,width:150},children:["NG code : ",E]}),(0,r.jsxs)(u.Z,{sx:{fontSize:20,width:300},children:["Part :",T," "]}),(0,r.jsxs)(u.Z,{sx:{fontSize:20,width:200},children:["Detail : ",F]}),(0,r.jsx)(x.Z,{sx:{width:300},label:"NG_qty",id:"outlined-size-normal",type:"number",InputLabelProps:{shrink:!0},value:L,onChange:e=>B(e.target.value)})]}),(0,r.jsxs)(f.Z,{direction:"row",justifyContent:"center",spacing:2,p:2,children:[(0,r.jsx)(p.Z,{type:"submit",variant:"contained",children:"Submit"}),(0,r.jsx)(p.Z,{onClick:G,variant:"outlined",color:"error",children:"Close"})]})]})})]}):null}},4836:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports}},function(e){e.O(0,[607,950,963,626,82,941,712,774,888,179],function(){return e(e.s=5965)}),_N_E=e.O()}]);