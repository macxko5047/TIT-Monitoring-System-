"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[90],{3540:function(e,t,a){var i=a(4836);t.Z=void 0;var o=i(a(4938)),l=a(5893),n=(0,o.default)((0,l.jsx)("path",{d:"m17 7-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"}),"Logout");t.Z=n},1019:function(e,t,a){var i=a(9802);let o=(0,i.eI)("https://lldzljxhukgbylauxnvo.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxsZHpsanhodWtnYnlsYXV4bnZvIiwicm9sZSI6ImFub24iLCJpYXQiOjE2NzAyOTkwMDIsImV4cCI6MTk4NTg3NTAwMn0.Lp4hg1lEBD7KYFckhxaG6NPGo5LSWngUBa37UDhkrNQ");t.Z=o},2090:function(e,t,a){a.r(t);var i=a(5893),o=a(7294),l=a(9144),n=a(1719),r=a(5084),s=a(1401),d=a(7169),c=a(9630),h=a(1953),m=a(2096),p=a(9712),x=a(5413),u=a(562),g=a(8945),Z=a(1019),I=a(3540);let f={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:1e3,hight:450,bgcolor:"background.paper",border:"20px solid #87CEFA",boxShadow:24,pt:3,px:5,pb:3},w=(0,n.ZP)(s.Z)(e=>{let{theme:t}=e;return{backgroundColor:"dark"===t.palette.mode?"#1A2027":"#fff",...t.typography.body2,padding:t.spacing(1),textAlign:"center",color:t.palette.text.secondary}}),j=e=>{var t,a;let n=new Date,s=("0"+n.getHours()).slice(-2),j=("0"+n.getMinutes()).slice(-2),b=("0"+n.getSeconds()).slice(-2),y=n.getTime(),S="".concat(s,":").concat(j,":").concat(b),[_,k]=(0,o.useState)([]);(0,o.useEffect)(()=>{let e=async()=>{let{data:e,error:t}=await Z.Z.from("Manpower_record").select("*").eq("PD_key",localStorage.getItem("PD_key"));e?k(e):console.log("fetch ManpowerError",t)};e()},[]);let v=async()=>{let{data:e,error:t}=await Z.Z.from("Manpower_record").select("*").eq("PD_key",localStorage.getItem("PD_key"));e?k(e):console.log("fetch ManpowerError",t)},[C,z]=(0,o.useState)(!1),M=()=>{z(!0),G()},D=()=>{z(!1)},[N,J]=(0,o.useState)(!1),P=()=>J(!0),E=()=>J(!1),[O,T]=(0,o.useState)(""),[V,L]=(0,o.useState)(""),[Y,q]=(0,o.useState)(""),U=(e,t)=>{T(t.row.emp_name),L(t.row.emp_no),q(t.row.id)},[X,F]=(0,o.useState)(""),G=async()=>{F(localStorage.getItem("timeStampStart"))},[R,A]=(0,o.useState)(""),B=Math.ceil((R-X)*60/3600/1e3),H=async()=>{let{data:e,error:t}=await Z.Z.from("Manpower_record").update({task_time:B}).eq("PD_key",localStorage.getItem("PD_key")).eq("id",Y);e?console.log("Duration Success"):console.log("Error",t),await A(0)};B>0&&H();let Q=async()=>{let{data:e,error:t}=await Z.Z.from("Manpower_record").update({end_datetime:S}).eq("PD_key",localStorage.getItem("PD_key")).eq("id",Y);e?(await alert("LogoutTime Success"),await console.log("LogoutTime Success",e)):console.log("LogoutTime Error",t),await A(y),await E()};(0,o.useEffect)(()=>{let e=async()=>{let e=await g.Z.request({url:"https://vdudlwqsrucojxjpqhvq.supabase.co/rest/v1/employee",method:"GET",headers:{Authorization:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZkdWRsd3FzcnVjb2p4anBxaHZxIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTY2ODc2MDU2NSwiZXhwIjoxOTg0MzM2NTY1fQ.-Z5955b7zSmDnGV3n2y65qJDElz3zfdyxAVyffJIR7Q",apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZkdWRsd3FzcnVjb2p4anBxaHZxIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTY2ODc2MDU2NSwiZXhwIjoxOTg0MzM2NTY1fQ.-Z5955b7zSmDnGV3n2y65qJDElz3zfdyxAVyffJIR7Q"}});e.data&&(console.log(e.data),K(e.data))};e()},[]);let[W,K]=(0,o.useState)([]),[$,ee]=(0,o.useState)(""),et=(null===(t=W.filter(e=>e.emp_no==$)[0])||void 0===t?void 0:t.emp_name)||"",ea=(null===(a=W.filter(e=>e.emp_no==$)[0])||void 0===a?void 0:a.department)||"",ei=async()=>{if(""===$&&alert("Please entry your ID User"),""!=$){let{data:e,error:t}=await Z.Z.from("Manpower_record").insert([{PD_key:localStorage.getItem("PD_key"),emp_no:$,emp_name:et,department:ea,Work_order_id:localStorage.getItem("Work_order_id"),start_datetime:S,activate_data:"activated",TimeStamp_start:y}]);await ee(""),e?console.log("Up data People ++ Success",e):console.log("Up data People ++ Error",t)}};return(0,o.useEffect)(()=>{let e=Z.Z.channel("custom-all-ManpowerRecord1").on("postgres_changes",{event:"*",schema:"public",table:"Manpower_record"},e=>{console.log("Change received! ReloadManpower_record ",e),v()}).subscribe();return()=>{Z.Z.removeChannel(e)}},[_]),(0,i.jsxs)("div",{children:[(0,i.jsx)(l.Z,{direction:"column-reverse",justifyContent:"flex-start",alignItems:"flex-start",spacing:0,padding:3,children:(0,i.jsx)(w,{children:(0,i.jsx)(r.Z,{onClick:M,variant:"contained",children:"Edit People"})})}),(0,i.jsx)(m.Z,{hideBackdrop:!0,open:C,onClose:D,"aria-labelledby":"child-modal-title","aria-describedby":"child-modal-description",children:(0,i.jsxs)(h.Z,{sx:{...f,width:1080,height:780},component:"form",children:[(0,i.jsx)(c.Z,{sx:{display:"flex",color:"#000000",alignItems:"center",justifyContent:"center"},variant:"h3",children:"Edit People"}),(0,i.jsx)(c.Z,{children:"Edit People "}),(0,i.jsx)("br",{}),(0,i.jsx)(h.Z,{sx:{flexGrow:1},children:(0,i.jsx)(x.Z,{container:!0,children:(0,i.jsxs)(x.Z,{container:!0,xs:12,md:12,lg:12,children:[(0,i.jsx)(x.Z,{xs:3,lg:3,children:(0,i.jsx)(w,{sx:{height:"100%",lg:1},children:(0,i.jsxs)(h.Z,{component:"form",children:[(0,i.jsx)(d.Z,{id:"useradd",label:"ID User",variant:"outlined",value:$,name:"useradd",type:"number",onChange:e=>ee(e.target.value),sx:{width:"100%",height:50,mt:2}}),(0,i.jsx)("br",{}),(0,i.jsx)(d.Z,{disabled:!0,id:"fullname",label:"Name",variant:"filled",value:et,name:"fullname",sx:{width:"100%",height:50,mt:2}}),(0,i.jsx)("br",{}),(0,i.jsx)(d.Z,{disabled:!0,id:"filled-disabled",label:"department",value:ea,name:"department",variant:"filled",sx:{width:"100%",height:50,mt:2}}),(0,i.jsx)("br",{}),(0,i.jsx)(r.Z,{sx:{width:"100%",height:50,mt:2,color:"#000000",bgcolor:"#7CFC00"},variant:"contained",color:"inherit",onClick:ei,children:"Submit"})]})})}),(0,i.jsx)(x.Z,{xs:9,md:9,lg:9,children:(0,i.jsxs)(w,{children:[(0,i.jsx)(c.Z,{children:"Table People"}),(0,i.jsx)("div",{style:{height:400,width:"100%"},children:(0,i.jsx)(p._,{rows:_,columns:[{field:"emp_no",headerName:"no",width:60},{field:"emp_name",headerName:"Name",width:200},{field:"start_datetime",headerName:"start time",width:120},{field:"end_datetime",headerName:"end time",width:120},{field:"task_time",headerName:"task time",width:120},{field:"action",headerName:"LogOut",width:70,sortable:!1,disableColumnMenu:!0,renderCell:e=>(0,i.jsx)(c.Z,{onClick(t){U(t,e),P()},children:(0,i.jsx)(u.Z,{"aria-label":"delete",size:"large",children:(0,i.jsx)(I.Z,{})})})}],pageSize:5,rowsPerPageOptions:[5]})})]})})]})})}),(0,i.jsx)(l.Z,{direction:"row",justifyContent:"space-around",alignItems:"center",spacing:12,sx:{m:1,p:5},children:(0,i.jsx)(w,{sx:{width:150,height:60,p:2.5,color:"red"},onClick:D,children:(0,i.jsx)(c.Z,{children:"CLOSE"})})})]})}),(0,i.jsx)(m.Z,{open:N,onClose:E,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,i.jsxs)(h.Z,{component:"form",noValidate:!0,sx:f,children:[(0,i.jsxs)(c.Z,{id:"modal-modal-title",variant:"h4",component:"h2",children:["Confirm LogOut Time : ",S]}),(0,i.jsxs)(c.Z,{sx:{mt:2},children:[(0,i.jsxs)(l.Z,{direction:"row",justifyContent:"center",spacing:5,children:[(0,i.jsx)(c.Z,{sx:{p:1},children:"Do you want to LogOut NO :"}),(0,i.jsx)(c.Z,{sx:{fontSize:28,color:"red"},children:V}),(0,i.jsx)(c.Z,{sx:{p:1},children:" Name :"}),(0,i.jsx)(c.Z,{sx:{fontSize:28,color:"red"},children:O})]}),(0,i.jsxs)(l.Z,{sx:{mt:3},direction:"row",justifyContent:"space-around",alignItems:"center",spacing:2,children:[(0,i.jsx)(r.Z,{variant:"contained",sx:{width:150,height:60,p:2.5},onClick:Q,children:"Logout"}),(0,i.jsx)(r.Z,{onClick:E,variant:"outlined",color:"error",sx:{width:150,height:60,p:2.5,bgcolor:"red",color:"white"},children:"Close"})]})]})]})})]})};t.default=j}}]);